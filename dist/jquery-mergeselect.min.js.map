{"version":3,"sources":["jquery-mergeselect.js"],"names":["factory","define","amd","module","exports","require","jQuery","$","setIndexes","$wrap","find","each","i","el","attr","removeClass","focus","window","pluginName","idx","setScroll","$container","$selected","itemMin","offset","top","scrollTop","itemMax","outerHeight","containerMin","containerMax","to","classPrefix","uid","labelTextFunction","settings","this","labelText","push","text","length","placeholder","numDisplayed","overflowText","apply","replace","join","defaults","selects","mergeSelect","$el","$selects","selects_map","index","value","id","create","prototype","multiple","is","append","reload","self","showSearch","search","searchText","prepend","choices","buildOptions","get","html","reloadDropdownLabel","$element","$this","$select","closest","has_multiple","tagName","data","children","prop","toLowerCase","selected","checked","input_type","change","fn","options","extend","active","document","on","$option","_mergeSelect","selected_map","map","key","hasMultiple","hasClass","select_id","addClass","toggleClass","val","e","which","blur","keywords","regex","RegExp","match","num_visible","target","is_hidden","preventDefault","last_index","parseInt","click"],"mappings":"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","file":"jquery-mergeselect.min.js","sourcesContent":["'use strict';\n// Based by on https://github.com/mgibbs189/fSelect\n// https://github.com/umdjs/umd\n\n// Uses CommonJS, AMD or browser globals to create a jQuery plugin.\n\n// Similar to jqueryPlugin.js but also tries to\n// work in a CommonJS environment.\n\n(function (factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = factory(require('jquery'));\n    } else {\n        // Browser globals\n        factory(jQuery);\n    }\n}(function ($) {\n    var pluginName = 'mergeSelect';\n    var classPrefix = '.' + pluginName + ' ';\n\n\n    var uid = function (i) {\n        return function () {\n            return pluginName + '-' + (++i);\n        };\n    }(0);\n\n    var labelTextFunction = function () {\n        var settings = this.settings;\n        var labelText = [];\n\n        this.$wrap.find('.ms-option.ms-selected').each(function (i, el) {\n            labelText.push($(el).find('.ms-option-label').text());\n        });\n\n        if (labelText.length < 1) {\n            labelText = settings.placeholder;\n        }\n        else if (labelText.length > settings.numDisplayed) {\n            var overflowText = settings.overflowText;\n            if (typeof overflowText == 'function') {\n                overflowText = overflowText.apply(this, [labelText])\n            }\n            labelText = overflowText.replace('{n}', labelText.length);\n        }\n        else {\n            labelText = labelText.join(', ');\n        }\n        return labelText\n    };\n\n    var defaults = {\n        selects: null,\n        placeholder: 'Select some options',\n        numDisplayed: 3,\n        overflowText: '{n} selected',\n        labelText: labelTextFunction\n    };\n\n    var classNameSuffix = '.ms-';\n\n    // TODO\n    var classNames = {\n        wrap: 'wrap',\n        option: 'option',\n        selected: 'selected',\n        label: 'label',\n        labelWrap: 'label-wrap',\n        optionLabel: 'option-label',\n        dropdown: 'dropdown',\n        hidden: 'hidden',\n        arrow: 'arrow',\n        optgroup: 'optgroup',\n        optgroupLabel: 'optgroup-label',\n        search: 'search'\n    };\n\n    /*\n     Constructor\n     */\n    var mergeSelect = function (el, settings) {\n        this.el = el;\n        this.$el = $(el);\n        this.settings = settings;\n        this.selects = settings.selects;\n        this.$selects = $(this.selects);\n        this.selects_map = {};\n        var selects_map = this.selects_map;\n\n        this.$selects.each(function (index, value) {\n            if (!value.id) {\n                value.id = uid();\n            }\n            selects_map[value.id] = $(value);\n        });\n\n        this.create();\n    };\n\n    mergeSelect.prototype = {\n        create: function () {\n            // TODO добавить возможность объединения разных типов\n            var multiple = this.$selects.is('[multiple]') ? ' multiple' : '';\n            this.$el.append('<div class=\"' + pluginName + '\"></div>');\n            var $container = this.$el.find('.' + pluginName);\n\n            $container.append('<div class=\"ms-wrap' + multiple + '\"></div>');\n\n            var $wrap = $container.find('.ms-wrap');\n\n            $wrap.append(\n                '<div class=\"ms-label-wrap\">'\n                + '<div class=\"ms-label\">'\n                + this.settings.placeholder\n                + '</div>'\n                + '<span class=\"ms-arrow\"></span></div>'\n            );\n\n            $wrap.append('<div class=\"ms-dropdown hidden\">'\n                + '<div class=\"ms-options\">'\n                + '</div></div>');\n\n            //$wrap.addClass('hidden');\n\n            this.$container = $container;\n\n            this.$wrap = $wrap;\n\n            this.reload();\n        },\n        reload: function () {\n            var self = this;\n            if (this.settings.showSearch) {\n                var search = '<div class=\"ms-search\"><input type=\"search\" placeholder=\"' + this.settings.searchText + '\" /></div>';\n                this.$wrap.find('.ms-dropdown').prepend(search);\n            }\n\n            var choices = '';\n            this.$selects.each(function (index, value) {\n                    choices += self.buildOptions($(value))\n                }\n            ).get();\n            this.$wrap.find('.ms-options').html(choices);\n            this.reloadDropdownLabel();\n        },\n\n        buildOptions: function ($element) {\n            var $this = this;\n            var choices = '';\n            var $select = $element.closest('select');\n            var has_multiple = $select.is('[multiple]');\n\n            if ($element.tagName == 'select' || $element.data('label')) {\n                // TODO formgroup\n                choices += '<div class=\"ms-optgroup\">';\n                choices += '<div class=\"ms-optgroup-label\">' + $element.data('label') + '</div>';\n                choices += '</div>';\n            }\n\n            $element.children().each(function (i, el) {\n                var $el = $(el);\n\n                if ('optgroup' == $el.prop('nodeName').toLowerCase()) {\n                    choices += '<div class=\"ms-optgroup\">';\n                    choices += '<div class=\"ms-optgroup-label\">' + $el.prop('label') + '</div>';\n                    choices += $this.buildOptions($el);\n                    choices += '</div>';\n                }\n                else {\n                    var selected = $el.is(':selected') ? ' selected' : '';\n                    var checked = selected ? 'checked=\"checked\"' : '';\n                    var input_type = has_multiple ? 'checkbox' : 'radio';\n\n                    choices += '<div class=\"ms-option'\n                        + selected + '\" data-value=\"'\n                        + $el.prop('value')\n                        + '\"'\n                        + 'data-select-id=\"' + $select.prop('id')\n                        + '\"><div class=\"ms-option-label\"><input type=\"' + input_type + '\"' + checked + '\"/>'\n                        + $el.html()\n                        + '</div></div>';\n                }\n            });\n\n            return choices;\n        },\n        reloadDropdownLabel: function () {\n            var labelText = this.settings.labelText.apply(this);\n            this.$wrap.find('.ms-label').html(labelText);\n\n            this.$selects.each(function (index, value) {\n                $(value).change()\n\n            });\n        }\n\n    };\n\n\n    $.fn[pluginName] = function (options) {\n\n        var settings = $.extend(defaults, options);\n\n        return this.each(function () {\n            var $container = $(this).find(classPrefix);\n            var data = $container.data(pluginName);\n\n            if (!data) {\n                data = new mergeSelect(this, settings);\n                data.$container.data(pluginName, data);\n            }\n\n            if (typeof settings == 'string') {\n                data[settings]();\n            }\n        });\n\n    };\n\n    /* Events */\n    window[pluginName] = {\n        'active': null,\n        'idx': -1\n    };\n    function setIndexes($wrap) {\n        $wrap.find('.ms-option:not(.hidden)').each(function (i, el) {\n            $(el).attr('data-index', i);\n            $wrap.find('.ms-option').removeClass('ms-hl');\n        });\n        $wrap.find('.ms-search input').focus();\n        window[pluginName].idx = -1;\n    }\n\n    function setScroll($wrap) {\n        var $container = $wrap.find('.ms-options');\n        var $selected = $wrap.find('.ms-option.ms-hl');\n\n        var itemMin = $selected.offset().top + $container.scrollTop();\n        var itemMax = itemMin + $selected.outerHeight();\n        var containerMin = $container.offset().top + $container.scrollTop();\n        var containerMax = containerMin + $container.outerHeight();\n\n        var to = null;\n        if (itemMax > containerMax) { // scroll down\n            to = $container.scrollTop() + itemMax - containerMax;\n            $container.scrollTop(to);\n        }\n        else if (itemMin < containerMin) { // scroll up\n            to = $container.scrollTop() - containerMin - itemMin;\n            $container.scrollTop(to);\n        }\n    }\n\n    $(document).on('click', classPrefix + '.ms-option', function () {\n        var $option = $(this);\n        var $wrap = $option.closest('.ms-wrap');\n\n        var $container = $wrap.closest(classPrefix);\n        var _mergeSelect = $container.data(pluginName);\n\n        var selected_map = {};\n        $.map(_mergeSelect.selects_map, function (value, key) {\n            selected_map[key] = null;\n        });\n\n\n        var hasMultiple = $wrap.hasClass('multiple');\n        /* todo mixin multiple and simple select */\n        if (!hasMultiple) {\n            /* TODO remove from only select */\n            var select_id = $option.data('select-id');\n\n            $wrap.find(\".option[data-select-id='\" + select_id + \"']\")\n                .removeClass('ms-selected')\n                .find('input').prop('checked', null)\n            ;\n\n            $option.addClass('ms-selected').find('input').prop('checked', true);\n            $wrap.find('.ms-dropdown').addClass('hidden');\n        }\n\n        if (hasMultiple) {\n            $option.toggleClass('ms-selected');\n            $option.find('input').prop('checked', $option.hasClass('ms-selected'));\n        }\n\n        $wrap.find('.ms-option.selected').each(function (i, el) {\n            var $el = $(el);\n            var selected = selected_map[$el.data('select-id')] || [];\n            selected.push($el.data('value'));\n            selected_map[$el.data('select-id')] = selected;\n        });\n\n        $.map(selected_map, function (value, key) {\n            var $select = _mergeSelect.selects_map[key];\n            $select.val(value);\n            _mergeSelect.reloadDropdownLabel();\n        });\n    });\n\n\n    $(document).on('keyup', classPrefix + '.ms-search input', function (e) {\n        if (40 == e.which) {\n            $(this).blur();\n            return;\n        }\n\n        var $wrap = $(this).closest('.ms-wrap');\n        var keywords = $(this).val();\n\n        $wrap.find('.ms-option, .ms-optgroup-label').removeClass('hidden');\n\n        if ('' != keywords) {\n            $wrap.find('.ms-option').each(function () {\n                var regex = new RegExp(keywords, 'gi');\n                if (null === $(this).find('.ms-option-label').text().match(regex)) {\n                    $(this).addClass('hidden');\n                }\n            });\n\n            $wrap.find('.ms-optgroup-label').each(function () {\n                var num_visible = $(this).closest('.ms-optgroup').find('.option:not(.hidden)').length;\n                if (num_visible < 1) {\n                    $(this).addClass('hidden');\n                }\n            });\n        }\n\n        setIndexes($wrap);\n    });\n\n    $(document).on('click', function (e) {\n        var $el = $(e.target);\n        var $wrap = $el.closest('.ms-wrap');\n\n        if (0 < $wrap.length) {\n            if ($el.hasClass('ms-label')) {\n                window[pluginName].active = $wrap;\n                var is_hidden = $wrap.find('.ms-dropdown').hasClass('hidden');\n                $('.ms-dropdown').addClass('hidden');\n\n                if (is_hidden) {\n                    $wrap.find('.ms-dropdown').removeClass('hidden');\n                }\n                else {\n                    $wrap.find('.ms-dropdown').addClass('hidden');\n                }\n\n                setIndexes($wrap);\n            }\n        }\n        else {\n            $('.ms-dropdown').addClass('hidden');\n            window[pluginName].active = null;\n        }\n    });\n\n    $(document).on('keydown', function (e) {\n        var $wrap = window[pluginName].active;\n\n        if (null === $wrap) {\n            return null;\n        }\n        else if (38 == e.which) { // up\n            e.preventDefault();\n\n            $wrap.find('.ms-option').removeClass('hl');\n\n            if (window[pluginName].idx > 0) {\n                window[pluginName].idx--;\n                $wrap.find('.ms-option[data-index=' + window[pluginName].idx + ']').addClass('hl');\n                setScroll($wrap);\n            }\n            else {\n                window[pluginName].idx = -1;\n                $wrap.find('.ms-search input').focus();\n            }\n        }\n        else if (40 == e.which) { // down\n            e.preventDefault();\n            var last_index = $wrap.find('.ms-option:last').attr('data-index');\n            if (window[pluginName].idx < parseInt(last_index)) {\n                window[pluginName].idx++;\n                $wrap.find('.ms-option').removeClass('ms-hl');\n                $wrap.find('.ms-option[data-index=' + window[pluginName].idx + ']').addClass('hl');\n                setScroll($wrap);\n            }\n        }\n        else if (32 == e.which || 13 == e.which) { // space, enter\n            $wrap.find('.ms-option.ms-hl').click();\n        }\n        else if (27 == e.which) { // esc\n            $('.ms-dropdown').addClass('ms-hidden');\n            window[pluginName].active = null;\n        }\n    });\n}));\n\n//# sourceMappingURL=jquery-mergeselect.js.map\n"],"sourceRoot":"/source/"}